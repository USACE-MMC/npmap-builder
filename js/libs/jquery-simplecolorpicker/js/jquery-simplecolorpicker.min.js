(function(c){var f=function(b,c){this.init("simplecolorpicker",b,c)};f.prototype={constructor:f,init:function(b,d,e){var a=this;a.type=b;a.$select=c(d);a.$select.hide();a.options=c.extend({},c.fn.simplecolorpicker.defaults,e);a.$colorList=null;!0===a.options.picker?(b=a.$select.find("> option:selected").text(),a.$icon=c('<span class="simplecolorpicker icon" title="'+b+'" style="background-color:'+a.$select.val()+';" role="button" tabindex="0"></span>').insertAfter(a.$select),a.$icon.on("click."+a.type,function(){a.$picker.is(":visible")?a.hidePicker():a.showPicker()}),a.$picker=c('<span class="simplecolorpicker picker '+a.options.theme+'"></span>').appendTo(document.body),a.$colorList=a.$picker,c(document).on("mousedown."+a.type,function(b){c(b.target)[0]!==a.$icon[0]&&a.hidePicker()}),a.$picker.on("mousedown."+a.type,c.proxy(a.mousedown,a))):(a.$inline=c('<span class="simplecolorpicker inline '+a.options.theme+'"></span>').insertAfter(a.$select),a.$colorList=a.$inline);a.$select.find("> option").each(function(){var b=c(this),d=b.val(),e=b.is(":disabled"),f="";!0===b.is(":selected")&&(f=" data-selected");var g="";!0===e&&(g=" data-disabled");var h="";!1===e&&(h=' title="'+b.text()+'"');var k="";!1===e&&(k=' role="button" tabindex="0"');d=c('<span class="color"'+h+' style="background-color: '+d+';" data-color="'+d+'"'+f+g+k+"></span>");a.$colorList.append(d);d.on("click."+a.type,c.proxy(a.colorSpanClicked,a));!0===b.next().is("optgroup")&&a.$colorList.append('<span class="vr"></span>')})},colorSpanClicked:function(b){!1===c(b.target).is("[data-disabled]")&&(this.selectColorSpan(c(b.target)),this.$select.trigger("change"))},destroy:function(){!0===this.options.picker&&(this.$icon.off("."+this.type),this.$icon.remove(),c(document).off("."+this.type));this.$colorList.off("."+this.type);this.$colorList.remove();this.$select.removeData(this.type);this.$select.show()},hidePicker:function(){this.$picker.hide(this.options.pickerDelay)},mousedown:function(b){b.stopPropagation();b.preventDefault()},selectColor:function(b){var d=this.$colorList.find("> span.color").filter(function(){return c(this).data("color").toLowerCase()===b.toLowerCase()});0<d.length&&this.selectColorSpan(d)},selectColorSpan:function(b){var c=b.data("color"),e=b.prop("title");b.siblings().removeAttr("data-selected");b.attr("data-selected","");!0===this.options.picker&&(this.$icon.css("background-color",c),this.$icon.prop("title",e),this.hidePicker());this.$select.val(c)},showPicker:function(){var b=this.$icon.offset();this.$picker.css({left:b.left-6,top:b.top+this.$icon.outerHeight()});this.$picker.show(this.options.pickerDelay)}};c.fn.simplecolorpicker=function(b){var d=c.makeArray(arguments);d.shift();return this.each(function(){var e=c(this),a=e.data("simplecolorpicker"),l="object"===typeof b&&b;void 0===a&&e.data("simplecolorpicker",a=new f(this,l));"string"===typeof b&&a[b].apply(a,d)})};c.fn.simplecolorpicker.defaults={picker:!1,pickerDelay:0,theme:""}})(jQuery);